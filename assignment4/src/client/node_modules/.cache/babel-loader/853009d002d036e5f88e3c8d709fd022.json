{"ast":null,"code":"var _jsxFileName = \"/Users/aikam320/Desktop/3309/webInterface/SE3309DBMS/client/src/pages/Login.jsx\";\nimport React, { Fragment, Component } from 'react';\nimport { Container, Row, Col, Form, Button } from 'react-bootstrap'; // Need to set these for the cookies\n\nimport { instanceOf } from 'prop-types';\nimport { withCookies, Cookies } from 'react-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  // Add this line of code to add the cookies handler to your class props\n  constructor(props) {\n    super(props); // use axios\n\n    this.isNotEmptyFields = () => {\n      return this.state.email && this.state.password ? true : false;\n    };\n\n    this.login = () => {\n      if (!this.isNotEmptyFields()) return;\n      this.setState(prevState => {\n        return Object.assign({}, prevState, {\n          isAuthenticating: true\n        });\n      }, () => {\n        this.loginProcess();\n      });\n    };\n\n    this.loginProcess = () => {\n      if (this.state.isAuthenticating) {\n        // Assign the credentials to the basic OAuth\n        const username = this.state.email;\n        const password = this.state.password; // Convert to base64\n\n        const token = Buffer.from(`${username}:${password}`, 'utf8').toString('base64');\n        const url = 'http://localhost:3005/authenticate';\n        this.axios.post(url, {}, {\n          headers: {\n            'Authorization': `Basic ${token}`\n          }\n        }).then(response => {\n          // Set the user cookie here\n          this.setState(prevState => {\n            return Object.assign({}, prevState, {\n              isAuthenticating: false\n            });\n          }, () => {\n            if (response.data.id) {\n              this.setUserCookie(response.data.id);\n              window.location.href = '/home';\n            } else {\n              // If there is not id\n              this.setState(prevState => {\n                return Object.assign({}, prevState, {\n                  errorMessage: response.data.message\n                });\n              });\n            }\n          });\n        }).catch(() => {\n          this.setState(prevState => {\n            return Object.assign({}, prevState, {\n              isAuthenticating: false\n            });\n          });\n        });\n      }\n    };\n\n    this.setUserCookie = id => {\n      this.props.cookies.set('userId', id, {\n        path: '/',\n        maxAge: process.env.REACT_APP_ENV_COOKIES_MAX_AGE\n      });\n    };\n\n    this.handleChange = event => {\n      let {\n        name,\n        value\n      } = event.target;\n      this.setState(prevState => {\n        return Object.assign({}, prevState, {\n          [name]: value\n        });\n      });\n    };\n\n    this.axios = require('axios'); // class component state\n\n    this.state = {\n      email: null,\n      password: null,\n      isAuthenticating: false,\n      errorMessage: null\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        children: /*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"Login Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this), this.state.errorMessage ? /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"red\"\n              },\n              children: this.state.errorMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 56\n            }, this) : \"\", /*#__PURE__*/_jsxDEV(Form, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"email\",\n                  placeholder: \"Enter email address...\",\n                  name: \"email\",\n                  value: this.state.email,\n                  onChange: this.handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"password\",\n                  placeholder: \"Enter password...\",\n                  name: \"password\",\n                  value: this.state.password,\n                  onChange: this.handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                disabled: this.state.isAuthenticating ? true : false,\n                variant: \"primary\",\n                type: \"button\",\n                onClick: this.login,\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nLogin.propTypes = {\n  cookies: instanceOf(Cookies).isRequired\n};\nexport default _c = withCookies(Login);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/aikam320/Desktop/3309/webInterface/SE3309DBMS/client/src/pages/Login.jsx"],"names":["React","Fragment","Component","Container","Row","Col","Form","Button","instanceOf","withCookies","Cookies","Login","constructor","props","isNotEmptyFields","state","email","password","login","setState","prevState","Object","assign","isAuthenticating","loginProcess","username","token","Buffer","from","toString","url","axios","post","headers","then","response","data","id","setUserCookie","window","location","href","errorMessage","message","catch","cookies","set","path","maxAge","process","env","REACT_APP_ENV_COOKIES_MAX_AGE","handleChange","event","name","value","target","require","render","color","propTypes","isRequired"],"mappings":"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","sourcesContent":["import React, { Fragment, Component } from 'react';\nimport { Container, Row, Col, Form, Button } from 'react-bootstrap';\n\n// Need to set these for the cookies\nimport { instanceOf } from 'prop-types';\nimport { withCookies, Cookies } from 'react-cookie';\n\nclass Login extends Component { \n\n    // Add this line of code to add the cookies handler to your class props\n    static propTypes = {\n        cookies: instanceOf(Cookies).isRequired\n    };\n\n    constructor(props) {\n        super(props);\n\n        // use axios\n        this.axios = require('axios');\n\n        // class component state\n        this.state = {\n            email: null,\n            password: null,\n            isAuthenticating: false,\n            errorMessage: null\n        }\n    }\n\n    isNotEmptyFields = () => {\n        return this.state.email && this.state.password ? true : false\n    }\n\n    login = () => {\n        if (!this.isNotEmptyFields()) return;\n\n        this.setState(prevState => {\n            return Object.assign({}, prevState, {\n                isAuthenticating: true,\n            })\n        }, () => {\n            this.loginProcess();            \n        });\n    }\n\n    loginProcess = () => {\n        if (this.state.isAuthenticating) {\n\n            // Assign the credentials to the basic OAuth\n            const username = this.state.email;\n            const password = this.state.password;\n\n            // Convert to base64\n            const token = Buffer.from(`${username}:${password}`, 'utf8').toString('base64');\n            const url = 'http://localhost:3005/authenticate';\n\n            this.axios.post(url, {}, {\n                headers : {\n                    'Authorization': `Basic ${token}`\n                }\n            })\n            .then((response) => {\n\n                // Set the user cookie here\n                this.setState(prevState => {\n                    return Object.assign({}, prevState, {\n                        isAuthenticating: false\n                    });\n                }, () => {\n\n                    if (response.data.id) {\n                        this.setUserCookie(response.data.id);\n                        window.location.href = '/home';\n                    } else { // If there is not id\n                        this.setState(prevState => {\n                            return Object.assign({}, prevState, {\n                                errorMessage: response.data.message\n                            });\n                        });\n                    }\n                });\n\n            })\n            .catch(() => {\n                this.setState(prevState => {\n                    return Object.assign({}, prevState, {\n                        isAuthenticating: false\n                    })\n                });\n            });\n        }\n    }\n\n\n    setUserCookie = (id) => {\n        this.props.cookies.set('userId', id, {\n            path: '/',\n            maxAge: process.env.REACT_APP_ENV_COOKIES_MAX_AGE\n        });\n    }\n\n    // We need this to handle the onChange of our input boxes\n    handleChange = (event) => {\n        let { name, value } = event.target;\n\n        this.setState(prevState => {\n            return Object.assign({}, prevState, {\n                [name] : value\n            });\n        });\n    }\n\n    render() {\n        return (\n            <Fragment>\n                <Helmet>\n                    <title>Login Page</title>\n                </Helmet>\n                <Container>\n                    <Row>\n                        <Col>\n                            <h2>Login</h2>\n                            {this.state.errorMessage ? <p style={{color : \"red\"}}>{this.state.errorMessage}</p>:\"\"}\n                            <Form>\n                                <Form.Group>\n                                    <Form.Label>Email</Form.Label>\n                                    <Form.Control\n                                        type=\"email\"\n                                        placeholder=\"Enter email address...\"\n                                        name=\"email\"\n                                        value={this.state.email}\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Form.Group>\n                                    <Form.Label>Password</Form.Label>\n                                    <Form.Control\n                                        type=\"password\"\n                                        placeholder=\"Enter password...\"\n                                        name=\"password\"\n                                        value={this.state.password}\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Button disabled={this.state.isAuthenticating ? true : false} variant=\"primary\" type=\"button\" onClick={this.login} >\n                                    Login\n                                </Button>\n                            </Form>\n                        </Col>\n                    </Row>\n                </Container>\n            </Fragment>\n        );\n    }\n}\n\nexport default withCookies(Login);"]},"metadata":{},"sourceType":"module"}